<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/public.css">
<script>

function proc1() {
	reg = prompt("주민번호를 입력하세요.");
	
	c1 = reg.substring(0,2);
	c2 = reg.substring(2,4);
	c3 = reg.substring(4,6);
	
	gend = reg.substr(7,1);
	
	if(gend==1 || gend==2){
		yy= "19" + c1;
	}else if(gend==3 || gend==4){
		yy= "20" + c1;
	}
	
	
	if(gend == 1 || gend == 3){
		gender = "남자"; 
	}else if(gend == 2 || gend == 4){
		gender = "여자"; 
	}
	
	now = new Date();
	age = now.getFullYear() - yy + 1;
	
	res = "주민번호 : " + reg + "<br>";
	res += "생일 : " + yy +"년 " + c2 + "월 " + c3 + "일<br>";
	res += "성별 : " + gender + "<br>";
	res += "나이 : " + age + "<br>";
	
	document.getElementById('result1').innerHTML = res;
}

function proc2(){
    str = 234567892345;
    
    regNo = prompt("주민등록번호를 입력해주세요", "123456-2345678");
    regNoarr = regNo.split("-"); // 배열로 반환
    
    regNo = regNoarr[0].concat(regNoarr[1]);
    
    console.log("regNo = " + regNo);
    console.log("regNo.length = " + regNo.length);
    
    sum = 0;
    for (i = 0; i < regNo.length-1; i++) {
       sum += regNo[i] * str.substr(i, 1);
    }
    
    value = 11 - (sum % 11);
    value = value % 10;
    
    res = "입력 : " + regNoarr[0] + "<br>";
    if(value == regNo[regNo.length-1]){
       res += "올바른 번호";
    }else{
       res += "올바르지 않은 번호";
    }
    document.querySelector("#result2").innerHTML = res;
 }


</script>
</head>
<body>
<div class="box">
   <h3>주민등록번호</h3>

   <br>
   <input type="button" value="확인" onclick="proc1()">
   <br><br>
   <div id="result1"></div>

</div>

<div class="box">
   <h3>주민등록번호 유효성 검사 </h3>

   <br>
   <input type="button" value="확인" onclick="proc2()">
   <br><br>
   <div id="result2"></div>

</div>

</body>
</html>